<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FitMotivation Pro - Sistema para Personal Trainers</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.css" />
<style>
  :root {
    --primary: #3498db;
    --primary-light: #5dade2;
    --secondary: #f1c40f;
    --accent: #e74c3c;
    --light: #ecf0f1;
    --light-gray: #bdc3c7;
    --dark: #2c3e50;
    --success: #2ecc71;
    --border-radius: 12px;
    --box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    --transition: all 0.3s ease;
    
    /* Dark mode variables */
    --bg-dark: #1a1a1a;
    --card-dark: #2d2d2d;
    --text-dark: #f0f0f0;
    --border-dark: #444;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: 'Segoe UI', 'Roboto', sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
    color: var(--dark);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 1rem;
    line-height: 1.6;
    transition: var(--transition);
  }

  body.dark-mode {
    background: var(--bg-dark);
    color: var(--text-dark);
  }

  .container {
    max-width: 800px;
    width: 100%;
    background: white;
    border-radius: var(--border-radius);
    padding: 2rem;
    box-shadow: var(--box-shadow);
    margin: 1rem 0;
    transition: var(--transition);
  }

  .dark-mode .container {
    background: var(--card-dark);
    color: var(--text-dark);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }

  header {
    text-align: center;
    margin-bottom: 2rem;
    position: relative;
  }

  .theme-toggle {
    position: absolute;
    right: 0;
    top: 0;
    background: var(--light);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition);
  }

  .dark-mode .theme-toggle {
    background: var(--dark);
    color: var(--text-dark);
  }

  h1 {
    color: var(--primary);
    font-size: 2rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
  }

  .dark-mode h1 {
    color: var(--primary-light);
  }

  .subtitle {
    color: var(--light-gray);
    font-size: 0.9rem;
    margin-bottom: 1.5rem;
  }

  .tab-container {
    display: flex;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid var(--light-gray);
    overflow-x: auto;
    scrollbar-width: none;
  }

  .tab-container::-webkit-scrollbar {
    display: none;
  }

  .dark-mode .tab-container {
    border-bottom-color: var(--border-dark);
  }

  .tab {
    padding: 0.8rem 1.5rem;
    cursor: pointer;
    font-weight: 600;
    color: var(--light-gray);
    transition: var(--transition);
    border-bottom: 3px solid transparent;
    white-space: nowrap;
  }

  .dark-mode .tab {
    color: #888;
  }

  .tab.active {
    color: var(--primary);
    border-bottom: 3px solid var(--primary);
  }

  .dark-mode .tab.active {
    color: var(--primary-light);
    border-bottom-color: var(--primary-light);
  }

  .tab-content {
    display: none;
    animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .tab-content.active {
    display: block;
  }

  label {
    display: block;
    margin-top: 1.5rem;
    font-weight: 600;
    color: var(--dark);
  }

  .dark-mode label {
    color: var(--text-dark);
  }

  input[type="text"],
  input[type="number"],
  input[type="email"],
  input[type="tel"],
  input[type="date"],
  input[type="time"],
  select,
  textarea {
    width: 100%;
    background: var(--light);
    border: 1px solid #ddd;
    border-radius: var(--border-radius);
    padding: 0.8rem 1rem;
    margin-top: 0.5rem;
    font-size: 1rem;
    font-family: inherit;
    color: var(--dark);
    transition: var(--transition);
  }

  .dark-mode input,
  .dark-mode select,
  .dark-mode textarea {
    background: #333;
    border-color: var(--border-dark);
    color: var(--text-dark);
  }

  input:focus,
  select:focus,
  textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
  }

  .dark-mode input:focus,
  .dark-mode select:focus,
  .dark-mode textarea:focus {
    border-color: var(--primary-light);
    box-shadow: 0 0 0 3px rgba(93, 173, 226, 0.2);
  }

  textarea {
    resize: vertical;
    min-height: 100px;
  }

  .checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
    margin-top: 1rem;
  }

  .checkbox-group label {
    background: var(--light);
    padding: 0.8rem 1.2rem;
    border-radius: 30px;
    font-weight: 500;
    cursor: pointer;
    user-select: none;
    color: var(--dark);
    transition: var(--transition);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .dark-mode .checkbox-group label {
    background: #333;
    color: var(--text-dark);
  }

  .checkbox-group input[type="checkbox"],
  .checkbox-group input[type="radio"] {
    display: none;
  }

  .checkbox-group input[type="checkbox"]:checked + span,
  .checkbox-group input[type="radio"]:checked + span {
    background: var(--primary);
    color: white;
  }

  .dark-mode .checkbox-group input[type="checkbox"]:checked + span,
  .dark-mode .checkbox-group input[type="radio"]:checked + span {
    background: var(--primary-light);
  }

  .checkbox-group label span {
    padding: 0.8rem 1.2rem;
    border-radius: 30px;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  button {
    margin-top: 2rem;
    width: 100%;
    background: var(--primary);
    color: white;
    font-weight: 600;
    font-size: 1.1rem;
    border: none;
    border-radius: var(--border-radius);
    padding: 1rem;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.8rem;
  }

  button:hover {
    background: var(--primary-light);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
  }

  .dark-mode button {
    background: var(--primary-light);
  }

  .dark-mode button:hover {
    background: var(--primary);
  }

  button.secondary {
    background: var(--secondary);
    color: var(--dark);
  }

  button.secondary:hover {
    background: #f4d03f;
  }

  button.accent {
    background: var(--accent);
  }

  button.accent:hover {
    background: #c0392b;
  }

  #fotoPreview {
    margin-top: 1rem;
    width: 100%;
    max-height: 300px;
    object-fit: cover;
    border-radius: var(--border-radius);
    border: 2px dashed var(--light-gray);
    display: none;
  }

  .dark-mode #fotoPreview {
    border-color: var(--border-dark);
  }

  .stats-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-top: 1.5rem;
  }

  .stat-card {
    background: white;
    border-radius: var(--border-radius);
    padding: 1rem;
    box-shadow: var(--box-shadow);
    text-align: center;
    transition: var(--transition);
  }

  .dark-mode .stat-card {
    background: #333;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }

  .stat-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.3rem;
  }

  .dark-mode .stat-value {
    color: var(--primary-light);
  }

  .stat-label {
    font-size: 0.8rem;
    color: var(--light-gray);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .progress-container {
    margin-top: 1.5rem;
  }

  .progress-bar {
    height: 10px;
    background: var(--light);
    border-radius: 5px;
    margin-top: 0.5rem;
    overflow: hidden;
  }

  .dark-mode .progress-bar {
    background: #444;
  }

  .progress-fill {
    height: 100%;
    background: var(--success);
    border-radius: 5px;
    width: 0%;
    transition: width 0.5s ease;
  }

  .motivation-quote {
    font-style: italic;
    color: var(--dark);
    text-align: center;
    margin: 1.5rem 0;
    padding: 1rem;
    background: rgba(241, 196, 15, 0.1);
    border-radius: var(--border-radius);
    border-left: 4px solid var(--secondary);
    transition: var(--transition);
  }

  .dark-mode .motivation-quote {
    color: var(--text-dark);
    background: rgba(241, 196, 15, 0.2);
  }

  #msgStatus {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: var(--border-radius);
    text-align: center;
    font-weight: 600;
    display: none;
  }

  .success {
    background: rgba(46, 204, 113, 0.1);
    color: var(--success);
    border-left: 4px solid var(--success);
  }

  .error {
    background: rgba(231, 76, 60, 0.1);
    color: var(--accent);
    border-left: 4px solid var(--accent);
  }

  .dark-mode .success {
    background: rgba(46, 204, 113, 0.2);
  }

  .dark-mode .error {
    background: rgba(231, 76, 60, 0.2);
  }

  .chart-container {
    margin: 2rem 0;
    position: relative;
    height: 300px;
    width: 100%;
  }

  .dashboard-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    margin-top: 1.5rem;
  }

  .dashboard-card {
    background: white;
    border-radius: var(--border-radius);
    padding: 1.5rem;
    box-shadow: var(--box-shadow);
    transition: var(--transition);
  }

  .dark-mode .dashboard-card {
    background: #333;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }

  .dashboard-card h3 {
    margin-bottom: 1rem;
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .dark-mode .dashboard-card h3 {
    color: var(--primary-light);
  }

  .dobras-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-top: 1rem;
  }

  .dobra-input {
    display: flex;
    flex-direction: column;
  }

  .dobra-input label {
    margin-top: 0;
    font-size: 0.9rem;
    font-weight: 500;
  }

  .dobra-input input {
    margin-top: 0.3rem;
  }

  .client-list {
    margin-top: 1.5rem;
  }

  .client-item {
    background: white;
    border-radius: var(--border-radius);
    padding: 1rem;
    margin-bottom: 1rem;
    box-shadow: var(--box-shadow);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: var(--transition);
  }

  .dark-mode .client-item {
    background: #333;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }

  .client-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.15);
  }

  .dark-mode .client-item:hover {
    box-shadow: 0 6px 16px rgba(0,0,0,0.4);
  }

  .client-info h4 {
    color: var(--primary);
    margin-bottom: 0.3rem;
  }

  .dark-mode .client-info h4 {
    color: var(--primary-light);
  }

  .client-info p {
    font-size: 0.9rem;
    color: var(--light-gray);
  }

  .client-actions {
    display: flex;
    gap: 0.5rem;
  }

  .client-actions button {
    margin: 0;
    width: auto;
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
  }

  .print-btn {
    background: var(--dark);
    margin-top: 1rem;
  }

  .dark-mode .print-btn {
    background: #444;
  }

  .print-btn:hover {
    background: #34495e;
  }

  .dark-mode .print-btn:hover {
    background: #555;
  }

  .section-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin: 2rem 0 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--light-gray);
  }

  .dark-mode .section-title {
    border-bottom-color: var(--border-dark);
  }

  .section-title h2 {
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .dark-mode .section-title h2 {
    color: var(--primary-light);
  }

  .alert-card {
    background: rgba(231, 76, 60, 0.1);
    border-left: 4px solid var(--accent);
    border-radius: var(--border-radius);
    padding: 1rem;
    margin: 1.5rem 0;
    color: var(--dark);
  }

  .dark-mode .alert-card {
    background: rgba(231, 76, 60, 0.2);
    color: var(--text-dark);
  }

  .alert-card h3 {
    color: var(--accent);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  @media (max-width: 768px) {
    .container {
      padding: 1.5rem;
    }

    .dashboard-grid,
    .dobras-container,
    .stats-container {
      grid-template-columns: 1fr;
    }

    h1 {
      font-size: 1.6rem;
    }

    .tab {
      padding: 0.6rem 1rem;
      font-size: 0.9rem;
    }
  }

  /* Animations */
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  .pulse {
    animation: pulse 2s infinite;
  }
</style>
</head>
<body>
  <div class="container">
    <header>
      <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
      </button>
      <h1><i class="fas fa-dumbbell"></i> FitMotivation Pro</h1>
      <p class="subtitle">Sistema completo para avalia√ß√£o f√≠sica e acompanhamento de clientes</p>
    </header>

    <div class="tab-container">
      <div class="tab active" onclick="openTab('tab1')"><i class="fas fa-user-plus"></i> Novo Cliente</div>
      <div class="tab" onclick="openTab('tab2')"><i class="fas fa-calendar-check"></i> Agendamentos</div>
      <div class="tab" onclick="openTab('tab3')"><i class="fas fa-chart-line"></i> Dashboard</div>
      <div class="tab" onclick="openTab('tab4')"><i class="fas fa-dumbbell"></i> Treinos</div>
    </div>

    <div id="tab1" class="tab-content active">
      <h2><i class="fas fa-user-edit"></i> Avalia√ß√£o F√≠sica</h2>
      
      <label for="nomeCliente">Nome do Cliente</label>
      <input type="text" id="nomeCliente" placeholder="Nome completo do cliente" />
      
      <label for="emailCliente">E-mail</label>
      <input type="email" id="emailCliente" placeholder="E-mail do cliente" />
      
      <label for="telefoneCliente">Telefone (WhatsApp)</label>
      <input type="tel" id="telefoneCliente" placeholder="(XX) XXXXX-XXXX" />
      
      <label>Foto do Cliente (Opcional)</label>
      <input type="file" id="fotoCliente" accept="image/*" />
      <img id="fotoClientePreview" alt="Foto do cliente" class="foto-preview" />
      
      <div class="section-title">
        <h2><i class="fas fa-ruler-combined"></i> Medidas Corporais</h2>
      </div>
      
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-value" id="alturaValue">0</div>
          <div class="stat-label">Altura (cm)</div>
          <input type="number" id="altura" min="0" placeholder="Ex: 175" class="stat-input" />
        </div>
        <div class="stat-card">
          <div class="stat-value" id="pesoValue">0</div>
          <div class="stat-label">Peso (kg)</div>
          <input type="number" id="peso" min="0" placeholder="Ex: 75" class="stat-input" />
        </div>
      </div>
      
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-value" id="imcValue">0</div>
          <div class="stat-label">IMC</div>
          <div id="imcClassificacao" style="font-size: 0.8rem; color: var(--light-gray);">Classifica√ß√£o</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="idadeValue">0</div>
          <div class="stat-label">Idade</div>
          <input type="number" id="idade" min="0" placeholder="Ex: 30" class="stat-input" />
        </div>
      </div>
      
      <div class="section-title">
        <h2><i class="fas fa-tape"></i> Dobras Cut√¢neas (mm)</h2>
      </div>
      
      <div class="dobras-container">
        <div class="dobra-input">
          <label for="subscapular">Subscapular</label>
          <input type="number" id="subscapular" min="0" step="0.1" placeholder="mm" />
        </div>
        <div class="dobra-input">
          <label for="triciptal">Triciptal</label>
          <input type="number" id="triciptal" min="0" step="0.1" placeholder="mm" />
        </div>
        <div class="dobra-input">
          <label for="peitoral">Peitoral</label>
          <input type="number" id="peitoral" min="0" step="0.1" placeholder="mm" />
        </div>
        <div class="dobra-input">
          <label for="axilar">Axilar</label>
          <input type="number" id="axilar" min="0" step="0.1" placeholder="mm" />
        </div>
        <div class="dobra-input">
          <label for="suprailiaca">Supra-il√≠aca</label>
          <input type="number" id="suprailiaca" min="0" step="0.1" placeholder="mm" />
        </div>
        <div class="dobra-input">
          <label for="abdominal">Abdominal</label>
          <input type="number" id="abdominal" min="0" step="0.1" placeholder="mm" />
        </div>
        <div class="dobra-input">
          <label for="coxa">Coxa</label>
          <input type="number" id="coxa" min="0" step="0.1" placeholder="mm" />
        </div>
        <div class="dobra-input">
          <label for="panturrilha">Panturrilha</label>
          <input type="number" id="panturrilha" min="0" step="0.1" placeholder="mm" />
        </div>
      </div>
      
      <div class="section-title">
        <h2><i class="fas fa-ruler"></i> Per√≠metros (cm)</h2>
      </div>
      
      <div class="dobras-container">
        <div class="dobra-input">
          <label for="torax">T√≥rax</label>
          <input type="number" id="torax" min="0" step="0.1" placeholder="cm" />
        </div>
        <div class="dobra-input">
          <label for="cintura">Cintura</label>
          <input type="number" id="cintura" min="0" step="0.1" placeholder="cm" />
        </div>
        <div class="dobra-input">
          <label for="abdomen">Abd√¥men</label>
          <input type="number" id="abdomen" min="0" step="0.1" placeholder="cm" />
        </div>
        <div class="dobra-input">
          <label for="quadril">Quadril</label>
          <input type="number" id="quadril" min="0" step="0.1" placeholder="cm" />
        </div>
        <div class="dobra-input">
          <label for="bracoNormal">Bra√ßo Normal</label>
          <input type="number" id="bracoNormal" min="0" step="0.1" placeholder="cm" />
        </div>
        <div class="dobra-input">
          <label for="bracoContraido">Bra√ßo Contra√≠do</label>
          <input type="number" id="bracoContraido" min="0" step="0.1" placeholder="cm" />
        </div>
        <div class="dobra-input">
          <label for="coxaPerimetro">Coxa</label>
          <input type="number" id="coxaPerimetro" min="0" step="0.1" placeholder="cm" />
        </div>
        <div class="dobra-input">
          <label for="panturrilhaPerimetro">Panturrilha</label>
          <input type="number" id="panturrilhaPerimetro" min="0" step="0.1" placeholder="cm" />
        </div>
      </div>
      
      <div class="section-title">
        <h2><i class="fas fa-heartbeat"></i> An√°lise de Composi√ß√£o Corporal</h2>
      </div>
      
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-value" id="gorduraValue">0%</div>
          <div class="stat-label">% Gordura</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="gorduraIdealValue">0%</div>
          <div class="stat-label">% Ideal</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="massaGordaValue">0kg</div>
          <div class="stat-label">Massa Gorda</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="massaMagraValue">0kg</div>
          <div class="stat-label">Massa Magra</div>
        </div>
      </div>
      
      <div class="chart-container">
        <canvas id="bodyCompositionChart"></canvas>
      </div>
      
      <div class="alert-card" id="alertCard" style="display: none;">
        <h3><i class="fas fa-exclamation-triangle"></i> Aten√ß√£o!</h3>
        <p id="alertMessage">O percentual de gordura est√° acima do recomendado para a idade e sexo do cliente.</p>
      </div>
      
      <label for="observacoes">Observa√ß√µes</label>
      <textarea id="observacoes" placeholder="Anota√ß√µes importantes sobre a avalia√ß√£o..."></textarea>
      
      <button id="btnCalcular"><i class="fas fa-calculator"></i> Calcular Composi√ß√£o Corporal</button>
      <button id="btnEnviarWhatsapp" class="secondary"><i class="fab fa-whatsapp"></i> Enviar para Cliente</button>
      <button id="btnSalvarAvaliacao" class="accent"><i class="fas fa-save"></i> Salvar Avalia√ß√£o</button>
      
      <div id="msgStatus"></div>
    </div>

    <div id="tab2" class="tab-content">
      <h2><i class="fas fa-calendar-alt"></i> Agendamentos</h2>
      
      <div class="stats-container">
        <div class="stat-card pulse">
          <div class="stat-value" id="agendamentosHoje">0</div>
          <div class="stat-label">Hoje</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="agendamentosSemana">0</div>
          <div class="stat-label">Esta Semana</div>
        </div>
      </div>
      
      <div class="section-title">
        <h2><i class="fas fa-plus-circle"></i> Novo Agendamento</h2>
      </div>
      
      <label for="clienteAgendamento">Cliente</label>
      <select id="clienteAgendamento">
        <option value="">Selecione um cliente...</option>
        <!-- Populado pelo JavaScript -->
      </select>
      
      <label for="dataAgendamento">Data</label>
      <input type="date" id="dataAgendamento" />
      
      <label for="horaAgendamento">Hor√°rio</label>
      <input type="time" id="horaAgendamento" />
      
      <label for="tipoAgendamento">Tipo de Sess√£o</label>
      <select id="tipoAgendamento">
        <option value="Avalia√ß√£o F√≠sica">Avalia√ß√£o F√≠sica</option>
        <option value="Treino Personalizado">Treino Personalizado</option>
        <option value="Aula Experimental">Aula Experimental</option>
        <option value="Acompanhamento">Acompanhamento</option>
      </select>
      
      <label for="obsAgendamento">Observa√ß√µes</label>
      <textarea id="obsAgendamento" placeholder="Detalhes sobre a sess√£o..."></textarea>
      
      <button id="btnAgendar" class="accent"><i class="fas fa-calendar-plus"></i> Agendar Sess√£o</button>
      
      <div class="section-title">
        <h2><i class="fas fa-list"></i> Pr√≥ximos Agendamentos</h2>
      </div>
      
      <div class="client-list" id="listaAgendamentos">
        <!-- Populado pelo JavaScript -->
      </div>
    </div>

    <div id="tab3" class="tab-content">
      <h2><i class="fas fa-chart-pie"></i> Dashboard do Cliente</h2>
      
      <label for="selecionarCliente">Selecione o Cliente</label>
      <select id="selecionarCliente">
        <option value="">Selecione um cliente...</option>
        <!-- Populado pelo JavaScript -->
      </select>
      
      <div class="dashboard-grid" id="dashboardCliente" style="display: none;">
        <div class="dashboard-card">
          <h3><i class="fas fa-weight"></i> Evolu√ß√£o de Peso</h3>
          <div class="chart-container">
            <canvas id="pesoChart"></canvas>
          </div>
        </div>
        
        <div class="dashboard-card">
          <h3><i class="fas fa-percentage"></i> Percentual de Gordura</h3>
          <div class="chart-container">
            <canvas id="gorduraChart"></canvas>
          </div>
        </div>
        
        <div class="dashboard-card">
          <h3><i class="fas fa-tape"></i> Dobras Cut√¢neas</h3>
          <div class="chart-container">
            <canvas id="dobrasChart"></canvas>
          </div>
        </div>
        
        <div class="dashboard-card">
          <h3><i class="fas fa-ruler-combined"></i> Per√≠metros</h3>
          <div class="chart-container">
            <canvas id="perimetrosChart"></canvas>
          </div>
        </div>
      </div>
      
      <button id="btnPrintDashboard" class="print-btn"><i class="fas fa-print"></i> Imprimir Dashboard</button>
      <button id="btnEnviarDashboard" class="secondary"><i class="fab fa-whatsapp"></i> Enviar Dashboard</button>
    </div>

    <div id="tab4" class="tab-content">
      <h2><i class="fas fa-dumbbell"></i> Prescri√ß√£o de Treinos</h2>
      
      <label for="selecionarClienteTreino">Selecione o Cliente</label>
      <select id="selecionarClienteTreino">
        <option value="">Selecione um cliente...</option>
        <!-- Populado pelo JavaScript -->
      </select>
      
      <div id="treinoContainer" style="display: none;">
        <div class="section-title">
          <h2><i class="fas fa-bullseye"></i> Objetivos do Cliente</h2>
        </div>
        
        <div class="checkbox-group" id="objetivosCheckboxes">
          <label><input type="checkbox" name="objetivo" value="Perda de peso" /><span>‚öñÔ∏è Perda de peso</span></label>
          <label><input type="checkbox" name="objetivo" value="Ganho de massa" /><span>üí™ Ganho de massa</span></label>
          <label><input type="checkbox" name="objetivo" value="Condicionamento" /><span>üèÉ Condicionamento</span></label>
          <label><input type="checkbox" name="objetivo" value="Reabilita√ß√£o" /><span>ü©π Reabilita√ß√£o</span></label>
          <label><input type="checkbox" name="objetivo" value="Performance" /><span>üèÜ Performance</span></label>
        </div>
        
        <div class="section-title">
          <h2><i class="fas fa-heartbeat"></i> N√≠vel do Cliente</h2>
        </div>
        
        <div class="checkbox-group" id="nivelCheckboxes">
          <label><input type="radio" name="nivel" value="Iniciante" checked /><span>üë∂ Iniciante</span></label>
          <label><input type="radio" name="nivel" value="Intermedi√°rio" /><span>üëç Intermedi√°rio</span></label>
          <label><input type="radio" name="nivel" value="Avan√ßado" /><span>üî• Avan√ßado</span></label>
        </div>
        
        <div class="section-title">
          <h2><i class="fas fa-dumbbell"></i> Treino Personalizado</h2>
        </div>
        
        <label for="diasTreino">Dias de Treino por Semana</label>
        <select id="diasTreino">
          <option value="2">2 dias</option>
          <option value="3" selected>3 dias</option>
          <option value="4">4 dias</option>
          <option value="5">5 dias</option>
          <option value="6">6 dias</option>
        </select>
        
        <div id="diasTreinoContainer">
          <!-- Gerado dinamicamente com base na sele√ß√£o de dias -->
        </div>
        
        <label for="observacoesTreino">Observa√ß√µes do Treino</label>
        <textarea id="observacoesTreino" placeholder="Detalhes espec√≠ficos, adapta√ß√µes, cuidados..."></textarea>
        
        <div class="motivation-quote">
          "O treino deve ser desafiador, mas adaptado √†s capacidades individuais de cada cliente."
        </div>
        
        <button id="btnGerarTreino"><i class="fas fa-magic"></i> Gerar Treino Autom√°tico</button>
        <button id="btnSalvarTreino" class="secondary"><i class="fas fa-save"></i> Salvar Treino</button>
        <button id="btnEnviarTreino" class="accent"><i class="fab fa-whatsapp"></i> Enviar Treino</button>
      </div>
    </div>
  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script>
  // Dados iniciais
  let clientes = [];
  let agendamentos = [];
  let avaliacoes = [];
  let treinos = [];
  
  // Elementos DOM
  const themeToggle = document.getElementById('themeToggle');
  const fotoClienteInput = document.getElementById('fotoCliente');
  const fotoClientePreview = document.getElementById('fotoClientePreview');
  const btnCalcular = document.getElementById('btnCalcular');
  const btnEnviarWhatsapp = document.getElementById('btnEnviarWhatsapp');
  const btnSalvarAvaliacao = document.getElementById('btnSalvarAvaliacao');
  const btnAgendar = document.getElementById('btnAgendar');
  const btnPrintDashboard = document.getElementById('btnPrintDashboard');
  const btnEnviarDashboard = document.getElementById('btnEnviarDashboard');
  const btnGerarTreino = document.getElementById('btnGerarTreino');
  const btnSalvarTreino = document.getElementById('btnSalvarTreino');
  const btnEnviarTreino = document.getElementById('btnEnviarTreino');
  const msgStatus = document.getElementById('msgStatus');
  const alertCard = document.getElementById('alertCard');
  
  // Inicializa√ß√£o
  document.addEventListener('DOMContentLoaded', function() {
    carregarDados();
    setupEventListeners();
    atualizarInputsRealtime();
    initTheme();
    
    // Simular alguns dados para demonstra√ß√£o
    if(clientes.length === 0) {
      clientes = [
        { id: 1, nome: "Jo√£o Silva", telefone: "5511999999999", email: "joao@example.com" },
        { id: 2, nome: "Maria Souza", telefone: "5511888888888", email: "maria@example.com" }
      ];
      
      agendamentos = [
        { id: 1, clienteId: 1, clienteNome: "Jo√£o Silva", data: "2023-06-15", hora: "09:00", tipo: "Avalia√ß√£o F√≠sica", obs: "Primeira avalia√ß√£o" },
        { id: 2, clienteId: 2, clienteNome: "Maria Souza", data: "2023-06-16", hora: "18:00", tipo: "Treino Personalizado", obs: "Treino B" }
      ];
      
      salvarDados();
    }
    
    atualizarListaClientes();
    atualizarAgendamentos();
    atualizarEstatisticasAgendamentos();
  });
  
  // Carregar dados do localStorage
  function carregarDados() {
    const dadosClientes = localStorage.getItem('fitmotivation_clientes');
    const dadosAgendamentos = localStorage.getItem('fitmotivation_agendamentos');
    const dadosAvaliacoes = localStorage.getItem('fitmotivation_avaliacoes');
    const dadosTreinos = localStorage.getItem('fitmotivation_treinos');
    
    if(dadosClientes) clientes = JSON.parse(dadosClientes);
    if(dadosAgendamentos) agendamentos = JSON.parse(dadosAgendamentos);
    if(dadosAvaliacoes) avaliacoes = JSON.parse(dadosAvaliacoes);
    if(dadosTreinos) treinos = JSON.parse(dadosTreinos);
  }
  
  // Salvar dados no localStorage
  function salvarDados() {
    localStorage.setItem('fitmotivation_clientes', JSON.stringify(clientes));
    localStorage.setItem('fitmotivation_agendamentos', JSON.stringify(agendamentos));
    localStorage.setItem('fitmotivation_avaliacoes', JSON.stringify(avaliacoes));
    localStorage.setItem('fitmotivation_treinos', JSON.stringify(treinos));
  }
  
  // Configurar listeners de eventos
  function setupEventListeners() {
    themeToggle.addEventListener('click', toggleTheme);
    fotoClienteInput.addEventListener('change', handleFotoClienteUpload);
    btnCalcular.addEventListener('click', calcularComposicaoCorporal);
    btnEnviarWhatsapp.addEventListener('click', enviarAvaliacaoWhatsapp);
    btnSalvarAvaliacao.addEventListener('click', salvarAvaliacao);
    btnAgendar.addEventListener('click', agendarSessao);
    btnPrintDashboard.addEventListener('click', imprimirDashboard);
    btnEnviarDashboard.addEventListener('click', enviarDashboardWhatsapp);
    btnGerarTreino.addEventListener('click', gerarTreinoAutomatico);
    btnSalvarTreino.addEventListener('click', salvarTreino);
    btnEnviarTreino.addEventListener('click', enviarTreinoWhatsapp);
    
    document.getElementById('selecionarCliente').addEventListener('change', carregarDashboardCliente);
    document.getElementById('selecionarClienteTreino').addEventListener('change', carregarDadosClienteTreino);
    document.getElementById('diasTreino').addEventListener('change', atualizarDiasTreino);
  }
  
  // Tema dark/light
  function initTheme() {
    const darkMode = localStorage.getItem('darkMode') === 'true';
    if(darkMode) {
      document.body.classList.add('dark-mode');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    }
  }
  
  function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    const isDark = document.body.classList.contains('dark-mode');
    localStorage.setItem('darkMode', isDark);
    themeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
  }
  
  // Upload da foto do cliente
  function handleFotoClienteUpload(e) {
    const file = e.target.files[0];
    if(!file) {
      fotoClientePreview.style.display = 'none';
      fotoClientePreview.src = '';
      return;
    }
    const reader = new FileReader();
    reader.onload = () => {
      fotoClientePreview.src = reader.result;
      fotoClientePreview.style.display = 'block';
    };
    reader.readAsDataURL(file);
  }
  
  // Atualizar inputs em tempo real
  function atualizarInputsRealtime() {
    // Altura e Peso
    document.getElementById('altura').addEventListener('input', function() {
      document.getElementById('alturaValue').textContent = this.value || '0';
    });
    
    document.getElementById('peso').addEventListener('input', function() {
      document.getElementById('pesoValue').textContent = this.value || '0';
    });
    
    // Idade
    document.getElementById('idade').addEventListener('input', function() {
      document.getElementById('idadeValue').textContent = this.value || '0';
    });
  }
  
  // Calcular composi√ß√£o corporal
  function calcularComposicaoCorporal() {
    const peso = parseFloat(document.getElementById('peso').value);
    const altura = parseFloat(document.getElementById('altura').value) / 100; // converter para metros
    const idade = parseInt(document.getElementById('idade').value);
    const sexo = document.querySelector('input[name="sexo"]:checked')?.value || 'masculino';
    
    if(!peso || !altura || !idade) {
      showMessage('Preencha peso, altura e idade para calcular!', 'error');
      return;
    }
    
    // Calcular IMC
    const imc = peso / (altura * altura);
    document.getElementById('imcValue').textContent = imc.toFixed(1);
    
    // Classifica√ß√£o do IMC
    let classificacao = '';
    if(imc < 18.5) classificacao = 'Abaixo do peso';
    else if(imc < 24.9) classificacao = 'Peso normal';
    else if(imc < 29.9) classificacao = 'Sobrepeso';
    else if(imc < 34.9) classificacao = 'Obesidade Grau I';
    else if(imc < 39.9) classificacao = 'Obesidade Grau II';
    else classificacao = 'Obesidade Grau III';
    
    document.getElementById('imcClassificacao').textContent = classificacao;
    
    // Calcular percentual de gordura (f√≥rmula simplificada)
    let gorduraPercentual;
    if(sexo === 'masculino') {
      // F√≥rmula para homens (Jackson & Pollock 7 dobras)
      const somaDobras = calcularSomaDobras();
      gorduraPercentual = (495 / (1.112 - (0.00043499 * somaDobras) + (0.00000055 * somaDobras * somaDobras) - (0.00028826 * idade))) - 450;
    } else {
      // F√≥rmula para mulheres (Jackson & Pollock 7 dobras)
      const somaDobras = calcularSomaDobras();
      gorduraPercentual = (495 / (1.097 - (0.00046971 * somaDobras) + (0.00000056 * somaDobras * somaDobras) - (0.00012828 * idade))) - 450;
    }
    
    // Valores ideais (aproximados por idade e sexo)
    let gorduraIdeal;
    if(sexo === 'masculino') {
      if(idade < 30) gorduraIdeal = 9-15;
      else if(idade < 40) gorduraIdeal = 11-17;
      else if(idade < 50) gorduraIdeal = 12-19;
      else gorduraIdeal = 14-21;
    } else {
      if(idade < 30) gorduraIdeal = 14-21;
      else if(idade < 40) gorduraIdeal = 15-23;
      else if(idade < 50) gorduraIdeal = 16-25;
      else gorduraIdeal = 17-27;
    }
    
    const gorduraMediaIdeal = (gorduraIdeal[0] + gorduraIdeal[1]) / 2;
    const gorduraSobra = gorduraPercentual - gorduraMediaIdeal;
    
    // Atualizar valores na interface
    document.getElementById('gorduraValue').textContent = gorduraPercentual.toFixed(1) + '%';
    document.getElementById('gorduraIdealValue').textContent = gorduraIdeal[0] + '-' + gorduraIdeal[1] + '%';
    
    const massaGorda = (gorduraPercentual / 100) * peso;
    const massaMagra = peso - massaGorda;
    
    document.getElementById('massaGordaValue').textContent = massaGorda.toFixed(1) + 'kg';
    document.getElementById('massaMagraValue').textContent = massaMagra.toFixed(1) + 'kg';
    
    // Mostrar alerta se necess√°rio
    if(gorduraPercentual > gorduraIdeal[1]) {
      alertCard.style.display = 'block';
      document.getElementById('alertMessage').textContent = 
        `O percentual de gordura (${gorduraPercentual.toFixed(1)}%) est√° acima do recomendado (${gorduraIdeal[0]}-${gorduraIdeal[1]}%) para ${sexo === 'masculino' ? 'homens' : 'mulheres'} de ${idade} anos.`;
    } else {
      alertCard.style.display = 'none';
    }
    
    // Atualizar gr√°fico
    atualizarGraficoComposicaoCorporal(massaMagra, massaGorda);
    
    showMessage('C√°lculos realizados com sucesso!', 'success');
  }
  
  // Calcular soma das dobras cut√¢neas
  function calcularSomaDobras() {
    const dobras = [
      'subscapular', 'triciptal', 'peitoral', 'axilar', 
      'suprailiaca', 'abdominal', 'coxa', 'panturrilha'
    ];
    
    return dobras.reduce((total, dobra) => {
      const valor = parseFloat(document.getElementById(dobra).value) || 0;
      return total + valor;
    }, 0);
  }
  
  // Atualizar gr√°fico de composi√ß√£o corporal
  function atualizarGraficoComposicaoCorporal(massaMagra, massaGorda) {
    const ctx = document.getElementById('bodyCompositionChart').getContext('2d');
    
    if(window.bodyCompositionChart) {
      window.bodyCompositionChart.destroy();
    }
    
    window.bodyCompositionChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Massa Magra', 'Massa Gorda'],
        datasets: [{
          data: [massaMagra, massaGorda],
          backgroundColor: ['#3498db', '#e74c3c'],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'bottom',
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                return `${context.label}: ${context.raw.toFixed(1)}kg (${((context.raw / (massaMagra + massaGorda)) * 100).toFixed(1)}%)`;
              }
            }
          }
        }
      }
    });
  }
  
  // Enviar avalia√ß√£o por WhatsApp
  function enviarAvaliacaoWhatsapp() {
    const nome = document.getElementById('nomeCliente').value.trim();
    const telefone = document.getElementById('telefoneCliente').value.trim();
    
    if(!nome || !telefone) {
      showMessage('Preencha nome e telefone do cliente!', 'error');
      return;
    }
    
    const peso = document.getElementById('peso').value || 'N/A';
    const altura = document.getElementById('altura').value || 'N/A';
    const imc = document.getElementById('imcValue').textContent;
    const imcClass = document.getElementById('imcClassificacao').textContent;
    const gordura = document.getElementById('gorduraValue').textContent;
    const gorduraIdeal = document.getElementById('gorduraIdealValue').textContent;
    const massaMagra = document.getElementById('massaMagraValue').textContent;
    const massaGorda = document.getElementById('massaGordaValue').textContent;
    
    let mensagem = `üìä *Avalia√ß√£o F√≠sica - FitMotivation Pro* üìä\n\n`;
    mensagem += `üë§ *Cliente:* ${nome}\n\n`;
    mensagem += `‚öñÔ∏è *Peso:* ${peso}kg\n`;
    mensagem += `üìè *Altura:* ${altura}cm\n`;
    mensagem += `üî¢ *IMC:* ${imc} (${imcClass})\n`;
    mensagem += `üí™ *Massa Magra:* ${massaMagra}\n`;
    mensagem += `üßà *Massa Gorda:* ${massaGorda}\n`;
    mensagem += `üìâ *% Gordura:* ${gordura} (Ideal: ${gorduraIdeal})\n\n`;
    
    if(alertCard.style.display === 'block') {
      mensagem += `‚ö†Ô∏è *ATEN√á√ÉO:* ${document.getElementById('alertMessage').textContent}\n\n`;
    }
    
    mensagem += `üîπ *Pr√≥ximos Passos:*\n`;
    mensagem += `- Agende uma aula experimental\n`;
    mensagem += `- Vamos criar um plano personalizado\n`;
    mensagem += `- Foco nos seus objetivos!\n\n`;
    mensagem += `üí¨ D√∫vidas? Estou √† disposi√ß√£o!\n`;
    mensagem += `‚úÖ Vamos juntos nessa jornada!`;
    
    const url = `https://wa.me/${telefone}?text=${encodeURIComponent(mensagem)}`;
    window.open(url, '_blank');
  }
  
  // Salvar avalia√ß√£o
  function salvarAvaliacao() {
    const nome = document.getElementById('nomeCliente').value.trim();
    const telefone = document.getElementById('telefoneCliente').value.trim();
    const email = document.getElementById('emailCliente').value.trim();
    
    if(!nome || !telefone) {
      showMessage('Preencha nome e telefone do cliente!', 'error');
      return;
    }
    
    // Verificar se o cliente j√° existe
    let cliente = clientes.find(c => c.telefone === telefone);
    const isNovoCliente = !cliente;
    
    if(isNovoCliente) {
      cliente = {
        id: clientes.length > 0 ? Math.max(...clientes.map(c => c.id)) + 1 : 1,
        nome,
        telefone,
        email,
        foto: fotoClientePreview.src || ''
      };
      clientes.push(cliente);
    } else {
      // Atualizar dados do cliente existente
      cliente.nome = nome;
      cliente.email = email;
      if(fotoClientePreview.src) cliente.foto = fotoClientePreview.src;
    }
    
    // Criar objeto de avalia√ß√£o
    const avaliacao = {
      id: avaliacoes.length > 0 ? Math.max(...avaliacoes.map(a => a.id)) + 1 : 1,
      clienteId: cliente.id,
      data: new Date().toISOString().split('T')[0],
      peso: parseFloat(document.getElementById('peso').value),
      altura: parseFloat(document.getElementById('altura').value),
      idade: parseInt(document.getElementById('idade').value),
      sexo: document.querySelector('input[name="sexo"]:checked')?.value || 'masculino',
      dobras: {
        subscapular: parseFloat(document.getElementById('subscapular').value) || 0,
        triciptal: parseFloat(document.getElementById('triciptal').value) || 0,
        peitoral: parseFloat(document.getElementById('peitoral').value) || 0,
        axilar: parseFloat(document.getElementById('axilar').value) || 0,
        suprailiaca: parseFloat(document.getElementById('suprailiaca').value) || 0,
        abdominal: parseFloat(document.getElementById('abdominal').value) || 0,
        coxa: parseFloat(document.getElementById('coxa').value) || 0,
        panturrilha: parseFloat(document.getElementById('panturrilha').value) || 0
      },
      perimetros: {
        torax: parseFloat(document.getElementById('torax').value) || 0,
        cintura: parseFloat(document.getElementById('cintura').value) || 0,
        abdomen: parseFloat(document.getElementById('abdomen').value) || 0,
        quadril: parseFloat(document.getElementById('quadril').value) || 0,
        bracoNormal: parseFloat(document.getElementById('bracoNormal').value) || 0,
        bracoContraido: parseFloat(document.getElementById('bracoContraido').value) || 0,
        coxa: parseFloat(document.getElementById('coxaPerimetro').value) || 0,
        panturrilha: parseFloat(document.getElementById('panturrilhaPerimetro').value) || 0
      },
      imc: parseFloat(document.getElementById('imcValue').textContent),
      gorduraPercentual: parseFloat(document.getElementById('gorduraValue').textContent),
      massaMagra: parseFloat(document.getElementById('massaMagraValue').textContent),
      massaGorda: parseFloat(document.getElementById('massaGordaValue').textContent),
      observacoes: document.getElementById('observacoes').value
    };
    
    // Adicionar √† lista de avalia√ß√µes
    avaliacoes.push(avaliacao);
    
    // Salvar dados
    salvarDados();
    
    // Atualizar listas
    atualizarListaClientes();
    
    showMessage(`Avalia√ß√£o ${isNovoCliente ? 'e novo cliente' : ''} salva com sucesso!`, 'success');
  }
  
  // Agendar sess√£o
  function agendarSessao() {
    const clienteId = parseInt(document.getElementById('clienteAgendamento').value);
    const data = document.getElementById('dataAgendamento').value;
    const hora = document.getElementById('horaAgendamento').value;
    const tipo = document.getElementById('tipoAgendamento').value;
    const obs = document.getElementById('obsAgendamento').value;
    
    if(!clienteId || !data || !hora || !tipo) {
      showMessage('Preencha todos os campos obrigat√≥rios!', 'error');
      return;
    }
    
    const cliente = clientes.find(c => c.id === clienteId);
    if(!cliente) {
      showMessage('Cliente n√£o encontrado!', 'error');
      return;
    }
    
    const agendamento = {
      id: agendamentos.length > 0 ? Math.max(...agendamentos.map(a => a.id)) + 1 : 1,
      clienteId,
      clienteNome: cliente.nome,
      data,
      hora,
      tipo,
      obs
    };
    
    agendamentos.push(agendamento);
    salvarDados();
    atualizarAgendamentos();
    atualizarEstatisticasAgendamentos();
    
    // Limpar formul√°rio
    document.getElementById('dataAgendamento').value = '';
    document.getElementById('horaAgendamento').value = '';
    document.getElementById('obsAgendamento').value = '';
    
    showMessage(`Sess√£o de ${tipo} agendada para ${cliente.nome}!`, 'success');
    
    // Op√ß√£o de enviar confirma√ß√£o por WhatsApp
    if(confirm(`Deseja enviar confirma√ß√£o por WhatsApp para ${cliente.nome}?`)) {
      const mensagem = `‚úÖ *Agendamento Confirmado - FitMotivation Pro* ‚úÖ\n\n`;
      mensagem += `üë§ *Cliente:* ${cliente.nome}\n`;
      mensagem += `üìÖ *Data:* ${formatarData(data)}\n`;
      mensagem += `‚è∞ *Hor√°rio:* ${hora}\n`;
      mensagem += `üèãÔ∏è‚Äç‚ôÇÔ∏è *Tipo:* ${tipo}\n`;
      if(obs) mensagem += `üìù *Observa√ß√µes:* ${obs}\n\n`;
      mensagem += `üìç *Local:* Academia FitMotivation\n`;
      mensagem += `üì± *Contato:* (XX) XXXX-XXXX\n\n`;
      mensagem += `Por favor, chegar 10 minutos antes. Cancelamentos com 24h de anteced√™ncia.`;
      
      const url = `https://wa.me/${cliente.telefone}?text=${encodeURIComponent(mensagem)}`;
      window.open(url, '_blank');
    }
  }
  
  // Atualizar lista de agendamentos
  function atualizarAgendamentos() {
    const lista = document.getElementById('listaAgendamentos');
    lista.innerHTML = '';
    
    // Ordenar por data e hora
    const agendamentosOrdenados = [...agendamentos].sort((a, b) => {
      const dataA = new Date(`${a.data}T${a.hora}`);
      const dataB = new Date(`${b.data}T${b.hora}`);
      return dataA - dataB;
    });
    
    agendamentosOrdenados.forEach(ag => {
      const cliente = clientes.find(c => c.id === ag.clienteId);
      
      const item = document.createElement('div');
      item.className = 'client-item';
      item.innerHTML = `
        <div class="client-info">
          <h4>${ag.clienteNome}</h4>
          <p><i class="fas fa-calendar-day"></i> ${formatarData(ag.data)} √†s ${ag.hora} - ${ag.tipo}</p>
          ${ag.obs ? `<p><i class="fas fa-comment"></i> ${ag.obs}</p>` : ''}
        </div>
        <div class="client-actions">
          <button class="secondary" onclick="cancelarAgendamento(${ag.id})"><i class="fas fa-times"></i></button>
          <button onclick="enviarLembrete(${ag.id})"><i class="fab fa-whatsapp"></i></button>
        </div>
      `;
      
      lista.appendChild(item);
    });
  }
  
  // Atualizar estat√≠sticas de agendamentos
  function atualizarEstatisticasAgendamentos() {
    const hoje = new Date().toISOString().split('T')[0];
    const agHoje = agendamentos.filter(a => a.data === hoje).length;
    
    document.getElementById('agendamentosHoje').textContent = agHoje;
    
    // Calcular agendamentos desta semana
    const hojeObj = new Date();
    const inicioSemana = new Date(hojeObj.setDate(hojeObj.getDate() - hojeObj.getDay()));
    const fimSemana = new Date(hojeObj.setDate(hojeObj.getDate() + 6));
    
    const agSemana = agendamentos.filter(a => {
      const dataAg = new Date(a.data);
      return dataAg >= inicioSemana && dataAg <= fimSemana;
    }).length;
    
    document.getElementById('agendamentosSemana').textContent = agSemana;
  }
  
  // Cancelar agendamento
  function cancelarAgendamento(id) {
    if(confirm('Tem certeza que deseja cancelar este agendamento?')) {
      agendamentos = agendamentos.filter(a => a.id !== id);
      salvarDados();
      atualizarAgendamentos();
      atualizarEstatisticasAgendamentos();
      showMessage('Agendamento cancelado!', 'success');
    }
  }
  
  // Enviar lembrete por WhatsApp
  function enviarLembrete(id) {
    const agendamento = agendamentos.find(a => a.id === id);
    if(!agendamento) return;
    
    const cliente = clientes.find(c => c.id === agendamento.clienteId);
    if(!cliente) return;
    
    const mensagem = `üîî *Lembrete de Agendamento - FitMotivation Pro* üîî\n\n`;
    mensagem += `Ol√° ${cliente.nome.split(' ')[0]}! Este √© um lembrete do seu agendamento:\n\n`;
    mensagem += `üìÖ *Data:* ${formatarData(agendamento.data)}\n`;
    mensagem += `‚è∞ *Hor√°rio:* ${agendamento.hora}\n`;
    mensagem += `üèãÔ∏è‚Äç‚ôÇÔ∏è *Tipo:* ${agendamento.tipo}\n`;
    if(agendamento.obs) mensagem += `üìù *Observa√ß√µes:* ${agendamento.obs}\n\n`;
    mensagem += `üìç *Local:* Academia FitMotivation\n\n`;
    mensagem += `Por favor, confirme sua presen√ßa respondendo esta mensagem.`;
    
    const url = `https://wa.me/${cliente.telefone}?text=${encodeURIComponent(mensagem)}`;
    window.open(url, '_blank');
  }
  
  // Atualizar lista de clientes nos selects
  function atualizarListaClientes() {
    const selectAgendamento = document.getElementById('clienteAgendamento');
    const selectDashboard = document.getElementById('selecionarCliente');
    const selectTreino = document.getElementById('selecionarClienteTreino');
    
    // Limpar op√ß√µes existentes (mantendo a primeira op√ß√£o vazia)
    while(selectAgendamento.options.length > 1) selectAgendamento.remove(1);
    while(selectDashboard.options.length > 1) selectDashboard.remove(1);
    while(selectTreino.options.length > 1) selectTreino.remove(1);
    
    // Adicionar clientes
    clientes.forEach(cliente => {
      const option = document.createElement('option');
      option.value = cliente.id;
      option.textContent = cliente.nome;
      
      selectAgendamento.appendChild(option.cloneNode(true));
      selectDashboard.appendChild(option.cloneNode(true));
      selectTreino.appendChild(option.cloneNode(true));
    });
  }

  // Carregar dashboard do cliente ao selecionar
  function carregarDashboardCliente() {
    const clienteId = parseInt(this.value);
    const dashboard = document.getElementById('dashboardCliente');

    if (!clienteId) {
      dashboard.style.display = 'none';
      return;
    }

    const cliente = clientes.find(c => c.id === clienteId);
    if (!cliente) return;

    const avaliacoesCliente = avaliacoes
      .filter(a => a.clienteId === clienteId)
      .sort((a, b) => new Date(a.data) - new Date(b.data));

    if (avaliacoesCliente.length === 0) {
      showMessage('Nenhuma avalia√ß√£o encontrada para este cliente!', 'error');
      dashboard.style.display = 'none';
      return;
    }

    dashboard.style.display = 'grid';

    // Gerar gr√°ficos
    criarGraficoPeso(avaliacoesCliente);
    criarGraficoGordura(avaliacoesCliente);
    criarGraficoDobras(avaliacoesCliente);
    criarGraficoPerimetros(avaliacoesCliente);
  }

  // Gr√°fico de evolu√ß√£o de peso
  function criarGraficoPeso(avaliacoes) {
    const ctx = document.getElementById('pesoChart').getContext('2d');

    if (window.pesoChart) window.pesoChart.destroy();

    const labels = avaliacoes.map(a => formatarData(a.data));
    const dadosPeso = avaliacoes.map(a => a.peso);

    window.pesoChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'Peso (kg)',
          data: dadosPeso,
          borderColor: '#3498db',
          backgroundColor: 'rgba(52, 152, 219, 0.1)',
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        },
        scales: {
          y: {
            beginAtZero: false,
            min: Math.min(...dadosPeso) - 5,
            max: Math.max(...dadosPeso) + 5
          }
        }
      }
    });
  }

  // Gr√°fico de percentual de gordura
  function criarGraficoGordura(avaliacoes) {
    const ctx = document.getElementById('gorduraChart').getContext('2d');

    if (window.gorduraChart) window.gorduraChart.destroy();

    const labels = avaliacoes.map(a => formatarData(a.data));
    const dadosGordura = avaliacoes.map(a => a.gorduraPercentual);

    window.gorduraChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: '% Gordura',
          data: dadosGordura,
          borderColor: '#e74c3c',
          backgroundColor: 'rgba(231, 76, 60, 0.1)',
          fill: true,
          tension: 0.3
        }]
        },
        options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        },
        scales: {
          y: {
            beginAtZero: false,
            min: Math.min(...dadosGordura) - 5,
            max: Math.max(...dadosGordura) + 5
          }
        }
      }
    });
  }

  // Gr√°fico de dobras cut√¢neas
  function criarGraficoDobras(avaliacoes) {
    const ctx = document.getElementById('dobrasChart').getContext('2d');

    if (window.dobrasChart) window.dobrasChart.destroy();

    const ultimaAvaliacao = avaliacoes[avaliacoes.length - 1];
    const dobras = ultimaAvaliacao.dobras;

    window.dobrasChart = new Chart(ctx, {
      type: 'radar',
      data: {
        labels: Object.keys(dobras).map(d => d.charAt(0).toUpperCase() + d.slice(1)),
        datasets: [{
          label: 'Dobras Cut√¢neas (mm)',
          data: Object.values(dobras),
          backgroundColor: 'rgba(241, 196, 15, 0.2)',
          borderColor: '#f1c40f',
          pointBackgroundColor: '#f1c40f',
          pointBorderColor: '#fff'
        }]
      },
      options: {
        responsive: true,
        scales: {
          r: {
            angleLines: { display: true },
            suggestedMin: 0,
            suggestedMax: Math.max(...Object.values(dobras)) + 5
          }
        }
      }
    });
  }

  // Gr√°fico de per√≠metros
  function criarGraficoPerimetros(avaliacoes) {
    const ctx = document.getElementById('perimetrosChart').getContext('2d');

    if (window.perimetrosChart) window.perimetrosChart.destroy();

    const ultimaAvaliacao = avaliacoes[avaliacoes.length - 1];
    const perimetros = ultimaAvaliacao.perimetros;

    window.perimetrosChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: Object.keys(perimetros).map(p => {
          if (p === 'bracoNormal') return 'Bra√ßo Normal';
          if (p === 'bracoContraido') return 'Bra√ßo Contra√≠do';
          return p.charAt(0).toUpperCase() + p.slice(1);
        }),
        datasets: [{
          label: 'Per√≠metros (cm)',
          data: Object.values(perimetros),
          backgroundColor: '#2ecc71',
          borderColor: '#27ae60',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        },
        scales: {
          y: { beginAtZero: true }
        }
      }
    });
  }

  // Fun√ß√£o para imprimir o dashboard como imagem
  function imprimirDashboard() {
    const clienteId = parseInt(document.getElementById('selecionarCliente').value);
    if (!clienteId) {
      showMessage('Selecione um cliente primeiro!', 'error');
      return;
    }

    const cliente = clientes.find(c => c.id === clienteId);
    if (!cliente) {
      showMessage('Cliente n√£o encontrado!', 'error');
      return;
    }

    const dashboard = document.getElementById('dashboardCliente');
    html2canvas(dashboard).then(canvas => {
      const imgData = canvas.toDataURL('image/png');
      const novaJanela = window.open('', '_blank');
      novaJanela.document.write(`<img src="${imgData}" alt="Dashboard de ${cliente.nome}" style="width:100%;" />`);
      novaJanela.document.close();
      novaJanela.focus();
      novaJanela.print();
    });
  }

  // Fun√ß√£o para enviar o dashboard por WhatsApp
  function enviarDashboardWhatsapp() {
    const clienteId = parseInt(document.getElementById('selecionarCliente').value);
    if (!clienteId) {
      showMessage('Selecione um cliente primeiro!', 'error');
      return;
    }

    const cliente = clientes.find(c => c.id === clienteId);
    if (!cliente) {
      showMessage('Cliente n√£o encontrado!', 'error');
      return;
    }

    const mensagem = `üìä *Dashboard de Avalia√ß√£o F√≠sica - ${cliente.nome}* üìä\n\n` +
                    `‚úÖ Confira o progresso, gr√°ficos e m√©tricas diretamente comigo.\n` +
                    `üí¨ Entre em contato para agendar novos treinos ou tirar d√∫vidas!\n\n` +
                    `üèãÔ∏è‚Äç‚ôÇÔ∏è *FitMotivation Pro* - Seu progresso em foco!`;

    const url = `https://wa.me/${cliente.telefone}?text=${encodeURIComponent(mensagem)}`;
    window.open(url, '_blank');
  }

  // Atualizar dias de treino
  function atualizarDiasTreino() {
    const dias = parseInt(document.getElementById('diasTreino').value);
    const container = document.getElementById('diasTreinoContainer');
    container.innerHTML = '';

    for(let i=1; i<=dias; i++) {
      const label = document.createElement('label');
      label.textContent = `Treino do Dia ${i}`;
      const textarea = document.createElement('textarea');
      textarea.placeholder = `Detalhes do treino do dia ${i}...`;
      textarea.id = `treinoDia${i}`;
      container.appendChild(label);
      container.appendChild(textarea);
    }
  }

  // Carregar dados do cliente para treino
  function carregarDadosClienteTreino() {
    const clienteId = parseInt(this.value);
    const container = document.getElementById('treinoContainer');
    if(!clienteId) {
      container.style.display = 'none';
      return;
    }

    container.style.display = 'block';
  }

  // Gerar treino autom√°tico (exemplo simplificado)
  function gerarTreinoAutomatico() {
    const dias = parseInt(document.getElementById('diasTreino').value);
    for(let i=1; i<=dias; i++) {
      const textarea = document.getElementById(`treinoDia${i}`);
      textarea.value = `üèãÔ∏è‚Äç‚ôÇÔ∏è Treino do Dia ${i}:\n- Aquecimento\n- Exerc√≠cios principais\n- Alongamento`;
    }
    showMessage('Treino gerado automaticamente!', 'success');
  }

  // Salvar treino
  function salvarTreino() {
    const clienteId = parseInt(document.getElementById('selecionarClienteTreino').value);
    if(!clienteId) {
      showMessage('Selecione um cliente!', 'error');
      return;
    }

    const dias = parseInt(document.getElementById('diasTreino').value);
    const treino = {
      id: treinos.length > 0 ? Math.max(...treinos.map(t => t.id)) + 1 : 1,
      clienteId,
      data: new Date().toISOString().split('T')[0],
      dias,
      detalhes: []
    };

    for(let i=1; i<=dias; i++) {
      const texto = document.getElementById(`treinoDia${i}`).value;
      treino.detalhes.push({ dia: i, treino: texto });
    }

    treinos.push(treino);
    salvarDados();
    showMessage('Treino salvo com sucesso!', 'success');
  }

  // Enviar treino por WhatsApp
  function enviarTreinoWhatsapp() {
    const clienteId = parseInt(document.getElementById('selecionarClienteTreino').value);
    if(!clienteId) {
      showMessage('Selecione um cliente!', 'error');
      return;
    }

    const cliente = clientes.find(c => c.id === clienteId);
    if(!cliente) return;

    const dias = parseInt(document.getElementById('diasTreino').value);
    let mensagem = `üèãÔ∏è‚Äç‚ôÇÔ∏è *Treino Personalizado - ${cliente.nome}* üèãÔ∏è‚Äç‚ôÇÔ∏è\n\n`;
    for(let i=1; i<=dias; i++) {
      const treino = document.getElementById(`treinoDia${i}`).value;
      mensagem += `*Dia ${i}:*\n${treino}\n\n`;
    }
    mensagem += `üí™ Mantenha o foco e conte comigo para acompanhar seu progresso!`;

    const url = `https://wa.me/${cliente.telefone}?text=${encodeURIComponent(mensagem)}`;
    window.open(url, '_blank');
  }

  // Mostrar mensagens de status
  function showMessage(msg, type) {
    msgStatus.textContent = msg;
    msgStatus.className = type;
    msgStatus.style.display = 'block';
    setTimeout(() => { msgStatus.style.display = 'none'; }, 3000);
  }

  // Formatar datas (dd/mm/yyyy)
  function formatarData(dataStr) {
    const [ano, mes, dia] = dataStr.split('-');
    return `${dia}/${mes}/${ano}`;
  }

  // Troca de abas
  function openTab(tabId) {
    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    document.querySelector(`.tab[onclick="openTab('${tabId}')"]`).classList.add('active');
    document.getElementById(tabId).classList.add('active');
  }
</script>
</body>
</html>
